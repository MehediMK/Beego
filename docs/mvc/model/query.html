<!DOCTYPE html>
<html>
	
<!-- Mirrored from beego.vip/docs/mvc/model/query.md by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 27 Apr 2022 04:29:24 GMT -->
<!-- Added by HTTrack -->
<!-- Mirrored from beego.w3engineers.com/beego.vip/docs/mvc/model/query.html by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 15 Oct 2022 03:29:51 GMT -->
<meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
		<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta name="author" content="slene, Unknown" />

<title>Advanced Queries - beego: simple &amp; powerful Go app framework</title>

<link rel="shortcut icon" href="../../../static/img/favicon.png" />


<script>/* Beego Compress Powered */</script>
	<link rel="stylesheet" href="../../../static/css/lib.mine67fe67f.css?ver=1650787190" />

<!--[if IE 7]>
<script>/* Beego Compress Powered */</script>
	<link rel="stylesheet" href="/static/css/ie7.min.css?ver=1650787190" />

<![endif]-->
<script>/* Beego Compress Powered */</script>
	<link rel="stylesheet" href="../../../static/css/app.mine67fe67f.css?ver=1650787190" />


<!--[if lt IE 9]>
	<script>/* Beego Compress Powered */</script>
	<script type="text/javascript" src="/static/js/ie9.min.js?ver=1650787190"></script>

<![endif]-->
		
	</head>
	<body id="front">
		<noscript>Please enable JavaScript in your browser!</noscript>
		<div id="wrapper">
			<nav class="navbar navbar-default navbar-fixed-top">
    <div class="container" data-toggle="clingify">
        <div class="row">
            <div class="navbar-header">
                
                <span class="visible-xs">
                    <a id="docs-collapse-btn" class="navbar-btn" data-toggle="jpanel-menu" data-target="#docs-collapse">
                        <span class="sr-only">Toggle docs menu</span>
                        <i class="icon icon-angle-right"></i>
                    </a>
                </span>
                
                <a type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </a>
                <a class="hidden-xs logo" href="../../../index.html">
                    <img style="height:32px;width:102px;" src="../../../static/img/beego_purple.png">
                </a>
                <div class="visible-xs text-center">
                    <a class="navbar-brand" href="../../../index.html">
                        Beego
                    </a>
                    
                    <span class="nav-github">
                        <span rel="show-github" data-user="astaxie" data-repo="beego"></span>
                    </span>
                    
                </div>
            </div>
            <div class="collapse navbar-collapse" role="navigation" id="navbar-collapse">
                <ul class="nav navbar-nav">
                    <li ><a href="../../../index.html">Home</a></li>
                    <li ><a href="../../../quickstart.html">Getting started</a></li>
                    <li ><a href="../../../community.html">Community</a></li>
                    <li class="active"><a href="../../intro/index.html">Documentation</a></li>
                    <li ><a href="../../../video.html">Video</a></li>
                    <li ><a href="../../../products.html">Products</a></li>
                    <li ><a href="../../../blog.html">Blog</a></li>
                </ul>
                <div class="hidden-sm hidden-xs nav-lang pull-right">
                    <div class="btn-group">
                        <button type="button" class="btn btn-xs btn-default btn-md dropdown-toggle" data-toggle="dropdown">Language:English <i class="caret"></i></button>
                        <ul class="dropdown-menu">
                            
                                <li><a href="javascript::" data-lang="zh-CN" class="lang-changed">简体中文</a></li>
                            
                                <li><a href="javascript::" data-lang="ru-RU" class="lang-changed">Russian</a></li>
                            
                        </ul>
                    </div>
                </div>
                <div class="hidden-sm hidden-xs nav-github pull-right">
                    <span rel="show-github" data-user="beego" data-repo="beego"></span>
                    <span rel="show-github" data-user="beego" data-repo="beego" data-type="fork"></span>
                </div>
            </div>
        </div>
    </div>
</nav>

			<div id="main">
				
<div class="container main-container">
    <div class="row">
        <div class="col-md-2 col-sm-3">
            <div id="docs-collapse" class="collapse navbar-collapse docs-sidenav">
                
                    
                    
    
        
            <ul class="list-unstyled">
                
                    
                        <li class="group">
                            <div class="section">
                            
                                <a class=" item" href="../../intro/index.html">Beego introduction</a>
                            
                            </div>
                            
    
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../../intro/contributing.html">Contributing</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../../intro/releases.html">Release Notes</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../../intro/upgrade.html">Upgrade Beego</a></li>
                    
                
            </ul>
        
    

                        </li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li class="group">
                            <div class="section">
                            
                                <a class=" item" href="../../install/index.html">Install / Upgrade</a>
                            
                            </div>
                            
    
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../../install/bee.html">bee tool usage</a></li>
                    
                
            </ul>
        
    

                        </li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li class="group">
                            <div class="section">
                            
                                <a class=" item" href="../../quickstart/index.html">Quickstart</a>
                            
                            </div>
                            
    
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../../quickstart/new.html">Create a new project</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../../quickstart/router.html">Routing settings</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../../quickstart/controller.html">Controller</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../../quickstart/model.html">Models</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../../quickstart/view.html">View</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../../quickstart/static.html">Static files</a></li>
                    
                
            </ul>
        
    

                        </li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li class="group">
                            <div class="section">
                            
                                <a class=" item" href="../index.html">MVC Introduction</a>
                            
                            </div>
                            
    
        
            <ul class="list-unstyled">
                
                    
                        <li class="group">
                            <div class="section">
                            
                                Controllers
                            
                            </div>
                            
    
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../controller/config.html">Configuration</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../controller/router.html">Routing</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../controller/controller.html">Controller funcs</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../controller/params.html">Request parameters</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../controller/xsrf.html">XSRF filtering</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../controller/filter.html">Filters</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../controller/session.html">Session control</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../controller/flash.html">Flash messages</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../controller/urlbuilding.html">URL Building</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../controller/jsonxml.html">Response formats</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../controller/validation.html">Form validation</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../controller/errors.html">Error Handling</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../controller/logs.html">Logging</a></li>
                    
                
            </ul>
        
    

                        </li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li class="group">
                            <div class="section">
                            
                                Models
                            
                            </div>
                            
    
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="overview.html">Overview</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="orm.html">ORM Usage</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="object.html">CRUD Operations</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class="active item" href="query.html">Advanced Queries</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="rawsql.html">Raw SQL to query</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="querybuilder.html">Query Builder</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="transaction.html">Transaction</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="models.html">Model Definition</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="cmd.html">Command Line</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="test.html">Test Cases</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="custom_fields.html">Custom Fields</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="faq.html">FAQ</a></li>
                    
                
            </ul>
        
    

                        </li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li class="group">
                            <div class="section">
                            
                                Views
                            
                            </div>
                            
    
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../view/view.html">Template Parsing</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../view/template.html">Template Functions</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../view/static.html">Static files</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../view/page.html">Pagination</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../view/global_variables.html">Global Variables</a></li>
                    
                
            </ul>
        
    

                        </li>
                    
                
            </ul>
        
    

                        </li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li class="group">
                            <div class="section">
                            
                                <a class=" item" href="../../module/index.html">Modules</a>
                            
                            </div>
                            
    
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../../module/session.html">Session Module</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../../module/cache.html">Cache Module</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../../module/logs.html">Logs Module</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../../module/httplib.html">Httplib Module</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../../module/context.html">Context Module</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../../module/toolbox.html">toolbox</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../../module/task.html">Task Module</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../../module/admin.html">Admin module</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../../module/config.html">Config Module</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../../module/governor.html">Governor module</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../../module/i18n.html">i18n Module</a></li>
                    
                
            </ul>
        
    

                        </li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li class="group">
                            <div class="section">
                            
                                <a class=" item" href="../../advantage/index.html">Advanced Beego</a>
                            
                            </div>
                            
    
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../../advantage/monitor.html">Live Monitor</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../../advantage/docs.html">Automated API Documentation</a></li>
                    
                
            </ul>
        
    

                        </li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li class="group">
                            <div class="section">
                            
                                <a class=" item" href="../../contributed/index.html">Middleware contribution</a>
                            
                            </div>
                            
    
        
    

                        </li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li class="group">
                            <div class="section">
                            
                                <a class=" item" href="../../deploy/index.html">Deployment</a>
                            
                            </div>
                            
    
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../../deploy/beego.html">Stand alone Deployment</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../../deploy/supervisor.html">Deployment with Supervisord</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../../deploy/systemctl.html">Deployment with Systemctl</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../../deploy/nginx.html">Deployment with nginx</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../../deploy/apache.html">Deployment with Apache</a></li>
                    
                
            </ul>
        
    

                        </li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li class="group">
                            <div class="section">
                            
                                <a class=" item" href="../../examples/index.html">Demos</a>
                            
                            </div>
                            
    
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../../examples/chat.html">Chat Room</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../../examples/shorturl.html">URL Shortener</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../../examples/todo.html">To-do List</a></li>
                    
                
            </ul>
        
    

                        </li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li class="group">
                            <div class="section">
                            
                                <a class=" item" href="../../faq/index.html">FAQ</a>
                            
                            </div>
                            
    
        
    

                        </li>
                    
                
            </ul>
        
    

                
            </div>
        </div>
        <div class="col-md-10 col-sm-9">
            <div class="box">
				<div>
					<script>
					  (function() {
					    var cx = '014389342508982455625:2tomkdt5uo4';
					    var gcse = document.createElement('script');
					    gcse.type = 'text/javascript';
					    gcse.async = true;
					    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
					        '//www.google.com/cse/cse.js?cx=' + cx;
					    var s = document.getElementsByTagName('script')[0];
					    s.parentNode.insertBefore(gcse, s);
					  })();
					</script>
					<gcse:search></gcse:search>
				</div>
                <div class="cell slim page-box">
                    <p>
                        <a href="https://github.com/beego/beedoc/blob/master/en-US/mvc/model/query.md" class="pull-right btn btn-info" target="_blank">Improve this page on GitHub</a>
                        <span class="clearfix"></span>
                    </p>
                    <div class="markdown docs-markdown">
                        <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title></title>
  <meta name="GENERATOR" content="Blackfriday Markdown Processor v1.1" />
  <meta charset="utf-8" />
</head>
<body>

<h1>Advanced Queries</h1>

<p>ORM uses <strong>QuerySeter</strong> to organize queries.  Every method that returns  <strong>QuerySeter</strong> will give you a new <strong>QuerySeter</strong> object.</p>

<p>Basic Usage:</p>

<pre lang="go"><code>o := orm.NewOrm()

// Get a QuerySeter object. User is table name
qs := o.QueryTable(&quot;user&quot;)

// Can also use object as table name
user := new(User)
qs = o.QueryTable(user) // return a QuerySeter
</code></pre>

<h2>expr</h2>

<p>expr describes fields and SQL operators in <code>QuerySeter</code>.</p>

<p>Field combination orders are decided by the relationship of tables. For example, <code>User</code> has a foreign key to <code>Profile</code>, so if you want to use <code>Profile.Age</code> as the condition, you have to use the expression <code>Profile__Age</code>. Note that the separator is double under scores <code>__</code>. <code>Expr</code> can also append operators at the end to execute related SQL. For example, <code>Profile__Age__gt</code> represents condition query <code>Profile.Age &gt; 18</code>.</p>

<p>Comments below describe SQL statements that are similar to the expr, but may not be the exact generated results.</p>

<pre lang="go"><code>qs.Filter(&quot;id&quot;, 1) // WHERE id = 1
qs.Filter(&quot;profile__age&quot;, 18) // WHERE profile.age = 18
qs.Filter(&quot;Profile__Age&quot;, 18) // key name and field name are both valid
qs.Filter(&quot;profile__age&quot;, 18) // WHERE profile.age = 18
qs.Filter(&quot;profile__age__gt&quot;, 18) // WHERE profile.age &gt; 18
qs.Filter(&quot;profile__age__gte&quot;, 18) // WHERE profile.age &gt;= 18
qs.Filter(&quot;profile__age__in&quot;, 18, 20) // WHERE profile.age IN (18, 20)

qs.Filter(&quot;profile__age__in&quot;, 18, 20).Exclude(&quot;profile__lt&quot;, 1000)
// WHERE profile.age IN (18, 20) AND NOT profile_id &lt; 1000
</code></pre>

<h2>Operators</h2>

<p>The supported operators:</p>

<ul>
<li><a href="#exact">exact</a> / <a href="#iexact">iexact</a> equal to<br /></li>
<li><a href="#contains">contains</a> / <a href="#icontains">icontains</a> contains<br /></li>
<li><a href="#gt / gte">gt / gte</a> greater than / greater than or equal to<br /></li>
<li><a href="#lt / lte">lt / lte</a> less than / less than or equal to<br /></li>
<li><a href="#startswith">startswith</a> / <a href="#istartswith">istartswith</a> starts with<br /></li>
<li><a href="#endswith">endswith</a> / <a href="#iendswith">iendswith</a> ends with<br /></li>
<li><a href="#in">in</a><br /></li>
<li><a href="#isnull">isnull</a><br /></li>
</ul>

<p>The operators that start with <code>i</code> ignore case.</p>

<h3>exact</h3>

<p>Default values of Filter, Exclude and Condition expr</p>

<pre lang="go"><code>qs.Filter(&quot;name&quot;, &quot;slene&quot;) // WHERE name = 'slene'
qs.Filter(&quot;name__exact&quot;, &quot;slene&quot;) // WHERE name = 'slene'
// using = , case sensitive or not is depending on which collation database table is used
qs.Filter(&quot;profile&quot;, nil) // WHERE profile_id IS NULL
</code></pre>

<h3>iexact</h3>

<pre lang="go"><code>qs.Filter(&quot;name__iexact&quot;, &quot;slene&quot;)
// WHERE name LIKE 'slene'
// Case insensitive, will match any name that equals to 'slene'
</code></pre>

<h3>contains</h3>

<pre lang="go"><code>qs.Filter(&quot;name__contains&quot;, &quot;slene&quot;)
// WHERE name LIKE BINARY '%slene%'
// Case sensitive, only match name that contains 'slene'
</code></pre>

<h3>icontains</h3>

<pre lang="go"><code>qs.Filter(&quot;name__icontains&quot;, &quot;slene&quot;)
// WHERE name LIKE '%slene%'
// Case insensitive, will match any name that contains 'slene'
</code></pre>

<h3>in</h3>

<pre lang="go"><code>qs.Filter(&quot;profile__age__in&quot;, 17, 18, 19, 20)
// WHERE profile.age IN (17, 18, 19, 20)
</code></pre>

<h3>gt / gte</h3>

<pre lang="go"><code>qs.Filter(&quot;profile__age__gt&quot;, 17)
// WHERE profile.age &gt; 17

qs.Filter(&quot;profile__age__gte&quot;, 18)
// WHERE profile.age &gt;= 18
</code></pre>

<h3>lt / lte</h3>

<pre lang="go"><code>qs.Filter(&quot;profile__age__lt&quot;, 17)
// WHERE profile.age &lt; 17

qs.Filter(&quot;profile__age__lte&quot;, 18)
// WHERE profile.age &lt;= 18
</code></pre>

<h3>startswith</h3>

<pre lang="go"><code>qs.Filter(&quot;name__startswith&quot;, &quot;slene&quot;)
// WHERE name LIKE BINARY 'slene%'
// Case sensitive, only match name that starts with 'slene'
</code></pre>

<h3>istartswith</h3>

<pre lang="go"><code>qs.Filter(&quot;name__istartswith&quot;, &quot;slene&quot;)
// WHERE name LIKE 'slene%'
// Case insensitive, will match any name that starts with 'slene'
</code></pre>

<h3>endswith</h3>

<pre lang="go"><code>qs.Filter(&quot;name__endswith&quot;, &quot;slene&quot;)
// WHERE name LIKE BINARY '%slene'
// Case sensitive, only match name that ends with 'slene'
</code></pre>

<h3>iendswith</h3>

<pre lang="go"><code>qs.Filter(&quot;name__iendswith&quot;, &quot;slene&quot;)
// WHERE name LIKE '%slene'
// Case insensitive, will match any name that ends with 'slene'
</code></pre>

<h3>isnull</h3>

<pre lang="go"><code>qs.Filter(&quot;profile__isnull&quot;, true)
qs.Filter(&quot;profile_id__isnull&quot;, true)
// WHERE profile_id IS NULL

qs.Filter(&quot;profile__isnull&quot;, false)
// WHERE profile_id IS NOT NULL
</code></pre>

<h2>Advanced Query API</h2>

<p>QuerySeter is the API of advanced queries. Here are its methods:</p>

<pre lang="go"><code>type QuerySeter interface {
// add condition expression to QuerySeter.
// for example:
//  filter by UserName == 'slene'
//  qs.Filter(&quot;UserName&quot;, &quot;slene&quot;)
//  sql : left outer join profile on t0.id1==t1.id2 where t1.age == 28
//  Filter(&quot;profile__Age&quot;, 28)
//   // time compare
//  qs.Filter(&quot;created&quot;, time.Now())
Filter(string, ...interface{}) QuerySeter
// add raw sql to querySeter.
// for example:
// qs.FilterRaw(&quot;user_id IN (SELECT id FROM profile WHERE age&gt;=18)&quot;)
// //sql-&gt; WHERE user_id IN (SELECT id FROM profile WHERE age&gt;=18)
FilterRaw(string, string) QuerySeter
// add NOT condition to querySeter.
// have the same usage as Filter
Exclude(string, ...interface{}) QuerySeter
// set condition to QuerySeter.
// sql's where condition
//  cond := orm.NewCondition()
//  cond1 := cond.And(&quot;profile__isnull&quot;, false).AndNot(&quot;status__in&quot;, 1).Or(&quot;profile__age__gt&quot;, 2000)
//  //sql-&gt; WHERE T0.`profile_id` IS NOT NULL AND NOT T0.`Status` IN (?) OR T1.`age` &gt;  2000
//  num, err := qs.SetCond(cond1).Count()
SetCond(*Condition) QuerySeter
// get condition from QuerySeter.
// sql's where condition
//  cond := orm.NewCondition()
//  cond = cond.And(&quot;profile__isnull&quot;, false).AndNot(&quot;status__in&quot;, 1)
//  qs = qs.SetCond(cond)
//  cond = qs.GetCond()
//  cond := cond.Or(&quot;profile__age__gt&quot;, 2000)
//  //sql-&gt; WHERE T0.`profile_id` IS NOT NULL AND NOT T0.`Status` IN (?) OR T1.`age` &gt;  2000
//  num, err := qs.SetCond(cond).Count()
GetCond() *Condition
// add LIMIT value.
// args[0] means offset, e.g. LIMIT num,offset.
// if Limit &lt;= 0 then Limit will be set to default limit ,eg 1000
// if QuerySeter doesn't call Limit, the sql's Limit will be set to default limit, eg 1000
//  for example:
//  qs.Limit(10, 2)
//  // sql-&gt; limit 10 offset 2
Limit(limit interface{}, args ...interface{}) QuerySeter
// add OFFSET value
// same as Limit function's args[0]
Offset(offset interface{}) QuerySeter
// add GROUP BY expression
// for example:
//  qs.GroupBy(&quot;id&quot;)
GroupBy(exprs ...string) QuerySeter
// add ORDER expression.
// &quot;column&quot; means ASC, &quot;-column&quot; means DESC.
// for example:
//  qs.OrderBy(&quot;-status&quot;)
OrderBy(exprs ...string) QuerySeter
// add FORCE INDEX expression.
// for example:
//  qs.ForceIndex(`idx_name1`,`idx_name2`)
// ForceIndex, UseIndex , IgnoreIndex are mutually exclusive
ForceIndex(indexes ...string) QuerySeter
// add USE INDEX expression.
// for example:
//  qs.UseIndex(`idx_name1`,`idx_name2`)
// ForceIndex, UseIndex , IgnoreIndex are mutually exclusive
UseIndex(indexes ...string) QuerySeter
// add IGNORE INDEX expression.
// for example:
//  qs.IgnoreIndex(`idx_name1`,`idx_name2`)
// ForceIndex, UseIndex , IgnoreIndex are mutually exclusive
IgnoreIndex(indexes ...string) QuerySeter
// set relation model to query together.
// it will query relation models and assign to parent model.
// for example:
//  // will load all related fields use left join .
//  qs.RelatedSel().One(&amp;user)
//  // will  load related field only profile
//  qs.RelatedSel(&quot;profile&quot;).One(&amp;user)
//  user.Profile.Age = 32
RelatedSel(params ...interface{}) QuerySeter
// Set Distinct
// for example:
//  o.QueryTable(&quot;policy&quot;).Filter(&quot;Groups__Group__Users__User&quot;, user).
//    Distinct().
//    All(&amp;permissions)
Distinct() QuerySeter
// set FOR UPDATE to query.
// for example:
//  o.QueryTable(&quot;user&quot;).Filter(&quot;uid&quot;, uid).ForUpdate().All(&amp;users)
ForUpdate() QuerySeter
// return QuerySeter execution result number
// for example:
//  num, err = qs.Filter(&quot;profile__age__gt&quot;, 28).Count()
Count() (int64, error)
// check result empty or not after QuerySeter executed
// the same as QuerySeter.Count &gt; 0
Exist() bool
// execute update with parameters
// for example:
//  num, err = qs.Filter(&quot;user_name&quot;, &quot;slene&quot;).Update(Params{
//      &quot;Nums&quot;: ColValue(Col_Minus, 50),
//  }) // user slene's Nums will minus 50
//  num, err = qs.Filter(&quot;UserName&quot;, &quot;slene&quot;).Update(Params{
//      &quot;user_name&quot;: &quot;slene2&quot;
//  }) // user slene's  name will change to slene2
Update(values Params) (int64, error)
// delete from table
// for example:
//  num ,err = qs.Filter(&quot;user_name__in&quot;, &quot;testing1&quot;, &quot;testing2&quot;).Delete()
//  //delete two user  who's name is testing1 or testing2
Delete() (int64, error)
// return a insert queryer.
// it can be used in times.
// example:
//  i,err := sq.PrepareInsert()
//  num, err = i.Insert(&amp;user1) // user table will add one record user1 at once
//  num, err = i.Insert(&amp;user2) // user table will add one record user2 at once
//  err = i.Close() //don't forget call Close
PrepareInsert() (Inserter, error)
// query all data and map to containers.
// cols means the columns when querying.
// for example:
//  var users []*User
//  qs.All(&amp;users) // users[0],users[1],users[2] ...
All(container interface{}, cols ...string) (int64, error)
// query one row data and map to containers.
// cols means the columns when querying.
// for example:
//  var user User
//  qs.One(&amp;user) //user.UserName == &quot;slene&quot;
One(container interface{}, cols ...string) error
// query all data and map to []map[string]interface.
// expres means condition expression.
// it converts data to []map[column]value.
// for example:
//  var maps []Params
//  qs.Values(&amp;maps) //maps[0][&quot;UserName&quot;]==&quot;slene&quot;
Values(results *[]Params, exprs ...string) (int64, error)
// query all data and map to [][]interface
// it converts data to [][column_index]value
// for example:
//  var list []ParamsList
//  qs.ValuesList(&amp;list) // list[0][1] == &quot;slene&quot;
ValuesList(results *[]ParamsList, exprs ...string) (int64, error)
// query all data and map to []interface.
// it's designed for one column record set, auto change to []value, not [][column]value.
// for example:
//  var list ParamsList
//  qs.ValuesFlat(&amp;list, &quot;UserName&quot;) // list[0] == &quot;slene&quot;
ValuesFlat(result *ParamsList, expr string) (int64, error)
// query all rows into map[string]interface with specify key and value column name.
// keyCol = &quot;name&quot;, valueCol = &quot;value&quot;
// table data
// name  | value
// total | 100
// found | 200
// to map[string]interface{}{
//  &quot;total&quot;: 100,
//  &quot;found&quot;: 200,
// }
RowsToMap(result *Params, keyCol, valueCol string) (int64, error)
// query all rows into struct with specify key and value column name.
// keyCol = &quot;name&quot;, valueCol = &quot;value&quot;
// table data
// name  | value
// total | 100
// found | 200
// to struct {
//  Total int
//  Found int
// }
RowsToStruct(ptrStruct interface{}, keyCol, valueCol string) (int64, error)
}
</code></pre>

<ul>
<li><p>Every API call that returns <strong>QuerySeter</strong> will give you a new <strong>QuerySeter</strong> object. It won&rsquo;t affect the previous object.</p></li>

<li><p>Advanced queries use <code>Filter</code> and <code>Exclude</code> to do conditional queries.  There are two filter rules - contain and exclude</p></li>
</ul>

<h3>Filter</h3>

<p>Used to filter the result for the <strong>include conditions</strong>.</p>

<p>Use <code>AND</code> to connect multiple filters:</p>

<pre lang="go"><code>qs.Filter(&quot;profile__isnull&quot;, true).Filter(&quot;name&quot;, &quot;slene&quot;)
// WHERE profile_id IS NULL AND name = 'slene'
</code></pre>

<h3>Exclude</h3>

<p>Used to filter the result for the <strong>exclude conditions</strong>.</p>

<p>Use <code>NOT</code> to exclude condition<br />
Use <code>AND</code> to connect multiple filters:</p>

<pre lang="go"><code>qs.Exclude(&quot;profile__isnull&quot;, true).Filter(&quot;name&quot;, &quot;slene&quot;)
// WHERE NOT profile_id IS NULL AND name = 'slene'
</code></pre>

<h3>SetCond</h3>

<p>Custom conditions:</p>

<pre lang="go"><code>cond := NewCondition()
cond1 := cond.And(&quot;profile__isnull&quot;, false).AndNot(&quot;status__in&quot;, 1).Or(&quot;profile__age__gt&quot;, 2000)

qs := orm.QueryTable(&quot;user&quot;)
qs = qs.SetCond(cond1)
// WHERE ... AND ... AND NOT ... OR ...

cond2 := cond.AndCond(cond1).OrCond(cond.And(&quot;name&quot;, &quot;slene&quot;))
qs = qs.SetCond(cond2).Count()
// WHERE (... AND ... AND NOT ... OR ...) OR ( ... )
</code></pre>

<h3>Limit</h3>

<p>Limit maximum returned lines. The second param can set <code>Offset</code></p>

<pre lang="go"><code>var DefaultRowsLimit = 1000 // The default limit of ORM is 1000

// LIMIT 1000

qs.Limit(10)
// LIMIT 10

qs.Limit(10, 20)
// LIMIT 10 OFFSET 20

qs.Limit(-1)
// no limit

qs.Limit(-1, 100)
// LIMIT 18446744073709551615 OFFSET 100
// 18446744073709551615 is 1&lt;&lt;64 - 1. Used to set the condition which is no limit but with offset
</code></pre>

<h3>Offset</h3>

<p>Set offset lines:</p>

<pre lang="go"><code>qs.Offset(20)
// LIMIT 1000 OFFSET 20
</code></pre>

<h3>GroupBy</h3>

<pre lang="go"><code>qs.GroupBy(&quot;id&quot;, &quot;age&quot;)
// GROUP BY id,age
</code></pre>

<h3>OrderBy</h3>

<p>Param uses <strong>expr</strong></p>

<p>Using <code>-</code> at the beginning of expr stands for order by <code>DESC</code></p>

<pre lang="go"><code>qs.OrderBy(&quot;id&quot;, &quot;-profile__age&quot;)
// ORDER BY id ASC, profile.age DESC

qs.OrderBy(&quot;-profile__age&quot;, &quot;profile&quot;)
// ORDER BY profile.age DESC, profile_id ASC
</code></pre>

<h3>ForceIndex</h3>

<p>Forcing DB to use the index.</p>

<p>You need to check your DB whether it support this feature.</p>

<pre lang="go"><code>qs.ForceIndex(`idx_name1`,`idx_name2`)
</code></pre>

<h3>UseIndex</h3>

<p>Suggest DB to user the index.</p>

<p>You need to check your DB whether it support this feature.</p>

<pre lang="go"><code>qs.UseIndex(`idx_name1`,`idx_name2`)
</code></pre>

<h3>IgnoreIndex</h3>

<p>Make DB ignore the index</p>

<p>You need to check your DB whether it support this feature.</p>

<pre lang="go"><code>qs.IgnoreIndex(`idx_name1`,`idx_name2`)
</code></pre>

<h3>Distinct</h3>

<p>Same as <code>distinct</code> statement in sql, return only distinct (different) values</p>

<pre lang="go"><code>qs.Distinct()
// SELECT DISTINCT
</code></pre>

<h3>RelatedSel</h3>

<p>Relational queries. Param uses <strong>expr</strong></p>

<pre lang="go"><code>var DefaultRelsDepth = 5 // RelatedSel will query for maximum 5 level by default

qs := o.QueryTable(&quot;post&quot;)

qs.RelatedSel()
// INNER JOIN user ... LEFT OUTER JOIN profile ...

qs.RelatedSel(&quot;user&quot;)
// INNER JOIN user ... 
// Only query the fields set by expr

// For fields with null attribute will use LEFT OUTER JOIN
</code></pre>

<h3>Count</h3>

<p>Return line count based on the current query</p>

<pre lang="go"><code>cnt, err := o.QueryTable(&quot;user&quot;).Count() // SELECT COUNT(*) FROM USER
fmt.Printf(&quot;Count Num: %s, %s&quot;, cnt, err)
</code></pre>

<h3>Exist</h3>

<pre lang="go"><code>exist := o.QueryTable(&quot;user&quot;).Filter(&quot;UserName&quot;, &quot;Name&quot;).Exist()
fmt.Printf(&quot;Is Exist: %s&quot;, exist)
</code></pre>

<h3>Update</h3>

<p>Execute batch updating based on the current query</p>

<pre lang="go"><code>num, err := o.QueryTable(&quot;user&quot;).Filter(&quot;name&quot;, &quot;slene&quot;).Update(orm.Params{
    &quot;name&quot;: &quot;astaxie&quot;,
})
fmt.Printf(&quot;Affected Num: %s, %s&quot;, num, err)
// SET name = &quot;astaixe&quot; WHERE name = &quot;slene&quot;
</code></pre>

<p>Atom operation add field:</p>

<pre lang="go"><code>// Assume there is a nums int field in user struct
num, err := o.QueryTable(&quot;user&quot;).Update(orm.Params{
    &quot;nums&quot;: orm.ColValue(orm.Col_Add, 100),
})
// SET nums = nums + 100
</code></pre>

<p>orm.ColValue supports:</p>

<pre lang="go"><code>Col_Add      // plus
Col_Minus    // minus 
Col_Multiply // multiply 
Col_Except   // divide
</code></pre>

<h3>Delete</h3>

<p>Execute batch deletion based on the current query</p>

<pre lang="go"><code>num, err := o.QueryTable(&quot;user&quot;).Filter(&quot;name&quot;, &quot;slene&quot;).Delete()
fmt.Printf(&quot;Affected Num: %s, %s&quot;, num, err)
// DELETE FROM user WHERE name = &quot;slene&quot;
</code></pre>

<h3>PrepareInsert</h3>

<p>Use a prepared statement to increase inserting speed with multiple inserts.</p>

<pre lang="go"><code>var users []*User
...
qs := o.QueryTable(&quot;user&quot;)
i, _ := qs.PrepareInsert()
for _, user := range users {
    id, err := i.Insert(user)
    if err != nil {
        ...
    }
}
// PREPARE INSERT INTO user (`name`, ...) VALUES (?, ...)
// EXECUTE INSERT INTO user (`name`, ...) VALUES (&quot;slene&quot;, ...)
// EXECUTE ...
// ...
i.Close() // Don't forget to close the statement
</code></pre>

<h3>All</h3>

<p>Return the related ResultSet</p>

<p>Param of <code>All</code> supports *[]Type and *[]*Type</p>

<pre lang="go"><code>var users []*User
num, err := o.QueryTable(&quot;user&quot;).Filter(&quot;name&quot;, &quot;slene&quot;).All(&amp;users)
fmt.Printf(&quot;Returned Rows Num: %s, %s&quot;, num, err)
</code></pre>

<p>All / Values / ValuesList / ValuesFlat will be limited by <a href="#limit">Limit</a>. 1000 lines by default.</p>

<p>The returned fields can be specified:</p>

<pre lang="go"><code>type Post struct {
    Id      int
    Title   string
    Content string
    Status  int
}

// Only return Id and Title
var posts []Post
o.QueryTable(&quot;post&quot;).Filter(&quot;Status&quot;, 1).All(&amp;posts, &quot;Id&quot;, &quot;Title&quot;)
</code></pre>

<p>The other fields of the object are set to the default value of the field&rsquo;s type.</p>

<h3>One</h3>

<p>Try to return one record</p>

<pre lang="go"><code>var user User
err := o.QueryTable(&quot;user&quot;).Filter(&quot;name&quot;, &quot;slene&quot;).One(&amp;user)
if err == orm.ErrMultiRows {
    // Have multiple records
    fmt.Printf(&quot;Returned Multi Rows Not One&quot;)
}
if err == orm.ErrNoRows {
    // No result 
    fmt.Printf(&quot;Not row found&quot;)
}
</code></pre>

<p>The returned fields can be specified:</p>

<pre lang="go"><code>// Only return Id and Title
var post Post
o.QueryTable(&quot;post&quot;).Filter(&quot;Content__istartswith&quot;, &quot;prefix string&quot;).One(&amp;post, &quot;Id&quot;, &quot;Title&quot;)
</code></pre>

<p>The other fields of the object are set to the default value of the fields&rsquo; type.</p>

<h3>Values</h3>

<p>Return key =&gt; value of result set</p>

<p>key is Field name in Model. value type if string.</p>

<pre lang="go"><code>var maps []orm.Params
num, err := o.QueryTable(&quot;user&quot;).Values(&amp;maps)
if err == nil {
    fmt.Printf(&quot;Result Nums: %d\n&quot;, num)
    for _, m := range maps {
        fmt.Println(m[&quot;Id&quot;], m[&quot;Name&quot;])
    }
}
</code></pre>

<p>Return specific fields:</p>

<p><strong>TODO</strong>: doesn&rsquo;t support recursive query. <strong>RelatedSel</strong> return Values directly</p>

<p>But it can specify the value needed by expr.</p>

<pre lang="go"><code>var maps []orm.Params
num, err := o.QueryTable(&quot;user&quot;).Values(&amp;maps, &quot;id&quot;, &quot;name&quot;, &quot;profile&quot;, &quot;profile__age&quot;)
if err == nil {
    fmt.Printf(&quot;Result Nums: %d\n&quot;, num)
    for _, m := range maps {
        fmt.Println(m[&quot;Id&quot;], m[&quot;Name&quot;], m[&quot;Profile&quot;], m[&quot;Profile__Age&quot;])
    // There is no complicated nesting data in the map
    }
}
</code></pre>

<h3>ValuesList</h3>

<p>The result set will be stored as a slice</p>

<p>The order of the result is same as the Fields order in the Model definition.</p>

<p>The values are saved as strings.</p>

<pre lang="go"><code>var lists []orm.ParamsList
num, err := o.QueryTable(&quot;user&quot;).ValuesList(&amp;lists)
if err == nil {
    fmt.Printf(&quot;Result Nums: %d\n&quot;, num)
    for _, row := range lists {
        fmt.Println(row)
    }
}
</code></pre>

<p>It can return specific fields by setting expr.</p>

<pre lang="go"><code>var lists []orm.ParamsList
num, err := o.QueryTable(&quot;user&quot;).ValuesList(&amp;lists, &quot;name&quot;, &quot;profile__age&quot;)
if err == nil {
    fmt.Printf(&quot;Result Nums: %d\n&quot;, num)
    for _, row := range lists {
        fmt.Printf(&quot;Name: %s, Age: %s\m&quot;, row[0], row[1])
    }
}
</code></pre>

<h3>ValuesFlat</h3>

<p>Only returns a single values slice of a specific field.</p>

<pre lang="go"><code>var list orm.ParamsList
num, err := o.QueryTable(&quot;user&quot;).ValuesFlat(&amp;list, &quot;name&quot;)
if err == nil {
    fmt.Printf(&quot;Result Nums: %d\n&quot;, num)
    fmt.Printf(&quot;All User Names: %s&quot;, strings.Join(list, &quot;, &quot;))
}
</code></pre>

<h2>Relational Query</h2>

<p>Let&rsquo;s see how to do a Relational Query by looking at <a href="orm.html">Model Definition</a></p>

<h4>User and Profile is OnToOne relation</h4>

<p>Query Profile by known User object:</p>

<pre lang="go"><code>user := &amp;User{Id: 1}
o.Read(user)
if user.Profile != nil {
    o.Read(user.Profile)
}
</code></pre>

<p>Cascaded query directly:</p>

<pre lang="go"><code>user := &amp;User{}
o.QueryTable(&quot;user&quot;).Filter(&quot;Id&quot;, 1).RelatedSel().One(user)
// Get Profile automatically
fmt.Println(user.Profile)
// Because In Profile we defined reverse relation User, Profile's User is also auto assigned. Can directly use:
fmt.Println(user.Profile.User)
</code></pre>

<p>Reverse finding Profile by User:</p>

<pre lang="go"><code>var profile Profile
err := o.QueryTable(&quot;profile&quot;).Filter(&quot;User__Id&quot;, 1).One(&amp;profile)
if err == nil {
    fmt.Println(profile)
}
</code></pre>

<h4>Post and User are ManyToOne relation. i.e.: ForeignKey is User</h4>

<pre lang="go"><code>type Post struct {
    Id    int
    Title string
    User  *User  `orm:&quot;rel(fk)&quot;`
    Tags  []*Tag `orm:&quot;rel(m2m)&quot;`
}
</code></pre>

<pre lang="go"><code>var posts []*Post
num, err := o.QueryTable(&quot;post&quot;).Filter(&quot;User&quot;, 1).RelatedSel().All(&amp;posts)
if err == nil {
    fmt.Printf(&quot;%d posts read\n&quot;, num)
    for _, post := range posts {
        fmt.Printf(&quot;Id: %d, UserName: %d, Title: %s\n&quot;, post.Id, post.User.UserName, post.Title)
    }
}
</code></pre>

<p>Query related User by Post.Title:</p>

<p>While RegisterModel, ORM will create reverse relation for Post in User. So it can query directly:</p>

<pre lang="go"><code>var user User
err := o.QueryTable(&quot;user&quot;).Filter(&quot;Post__Title&quot;, &quot;The Title&quot;).Limit(1).One(&amp;user)
if err == nil {
    fmt.Printf(user)
}
</code></pre>

<h4>Post and Tag are ManyToMany relation</h4>

<p>After setting rel(m2m), ORM will create connecting table automatically.</p>

<pre lang="go"><code>type Post struct {
    Id    int
    Title string
    User  *User  `orm:&quot;rel(fk)&quot;`
    Tags  []*Tag `orm:&quot;rel(m2m)&quot;`
}
</code></pre>

<pre lang="go"><code>type Tag struct {
    Id    int
    Name  string
    Posts []*Post `orm:&quot;reverse(many)&quot;`
}
</code></pre>

<p>Query which post used the tag with tag name:</p>

<pre lang="go"><code>var posts []*Post
num, err := dORM.QueryTable(&quot;post&quot;).Filter(&quot;Tags__Tag__Name&quot;, &quot;golang&quot;).All(&amp;posts)
</code></pre>

<p>Query how many tags does the post have with post title:</p>

<pre lang="go"><code>var tags []*Tag
num, err := dORM.QueryTable(&quot;tag&quot;).Filter(&quot;Posts__Post__Title&quot;, &quot;Introduce Beego ORM&quot;).All(&amp;tags)
</code></pre>

<h2>Load Related Field</h2>

<p>LoadRelated is used to load relation field of model. Including all rel/reverse - one/many relation.</p>

<p>Load ManyToMany relation field</p>

<pre lang="go"><code>// load related Tags
post := Post{Id: 1}
err := o.Read(&amp;post)
num, err := o.LoadRelated(&amp;post, &quot;Tags&quot;)
</code></pre>

<pre lang="go"><code>// Load related Posts
tag := Tag{Id: 1}
err := o.Read(&amp;tag)
num, err := o.LoadRelated(&amp;tag, &quot;Posts&quot;)
</code></pre>

<p>User is the ForeignKey of Post. Load related ReverseMany</p>

<pre lang="go"><code>type User struct {
    Id    int
    Name  string
    Posts []*Post `orm:&quot;reverse(many)&quot;`
}

user := User{Id: 1}
err := dORM.Read(&amp;user)
num, err := dORM.LoadRelated(&amp;user, &quot;Posts&quot;)
for _, post := range user.Posts {
    //...
}
</code></pre>

<h2>Handling ManyToMany relation</h2>

<pre lang="go"><code>// QueryM2Mer model to model query struct
// all operations are on the m2m table only, will not affect the origin model table
type QueryM2Mer interface {
    // add models to origin models when creating queryM2M.
    // example:
    //  m2m := orm.QueryM2M(post,&quot;Tag&quot;)
    //  m2m.Add(&amp;Tag1{},&amp;Tag2{})
    //      for _,tag := range post.Tags{}{ ... }
    // param could also be any of the follow
    //  []*Tag{{Id:3,Name: &quot;TestTag1&quot;}, {Id:4,Name: &quot;TestTag2&quot;}}
    //  &amp;Tag{Id:5,Name: &quot;TestTag3&quot;}
    //  []interface{}{&amp;Tag{Id:6,Name: &quot;TestTag4&quot;}}
    // insert one or more rows to m2m table
    // make sure the relation is defined in post model struct tag.
    Add(...interface{}) (int64, error)
    // remove models following the origin model relationship
    // only delete rows from m2m table
    // for example:
    // tag3 := &amp;Tag{Id:5,Name: &quot;TestTag3&quot;}
    // num, err = m2m.Remove(tag3)
    Remove(...interface{}) (int64, error)
    // check model is existed in relationship of origin model
    Exist(interface{}) bool
    // clean all models in related of origin model
    Clear() (int64, error)
    // count all related models of origin model
    Count() (int64, error)
}
</code></pre>

<p>Create a QueryM2Mer object</p>

<pre lang="go"><code>o := orm.NewOrm()
post := Post{Id: 1}
m2m := o.QueryM2M(&amp;post, &quot;Tags&quot;)
// In the first param object must have primary key
// The second param is the M2M field will work with
// API of QueryM2Mer will used to Post with id equals 1
</code></pre>

<h3>QueryM2Mer Add</h3>

<pre lang="go"><code>tag := &amp;Tag{Name: &quot;golang&quot;}
o.Insert(tag)

num, err := m2m.Add(tag)
if err == nil {
    fmt.Println(&quot;Added nums: &quot;, num)
}
</code></pre>

<p>Add supports many types: Tag *Tag []*Tag []Tag []interface{}</p>

<pre lang="go"><code>var tags []*Tag
...
// After reading tags
...
num, err := m2m.Add(tags)
if err == nil {
    fmt.Println(&quot;Added nums: &quot;, num)
}
// It can pass multiple params
// m2m.Add(tag1, tag2, tag3)
</code></pre>

<h3>QueryM2Mer Remove</h3>

<p>Remove tag from M2M relation:</p>

<p>Remove supports many types: Tag *Tag []*Tag []Tag []interface{}</p>

<pre lang="go"><code>var tags []*Tag
...
// After reading tags
...
num, err := m2m.Remove(tags)
if err == nil {
    fmt.Println(&quot;Removed nums: &quot;, num)
}
// It can pass multiple params
// m2m.Remove(tag1, tag2, tag3)
</code></pre>

<h3>QueryM2Mer Exist</h3>

<p>Test if Tag is in M2M relation</p>

<pre lang="go"><code>if m2m.Exist(&amp;Tag{Id: 2}) {
    fmt.Println(&quot;Tag Exist&quot;)
}
</code></pre>

<h3>QueryM2Mer Clear</h3>

<p>Clear all M2M relation</p>

<pre lang="go"><code>nums, err := m2m.Clear()
if err == nil {
    fmt.Println(&quot;Removed Tag Nums: &quot;, nums)
}
</code></pre>

<h3>QueryM2Mer Count</h3>

<p>Count the number of Tags</p>

<pre lang="go"><code>nums, err := m2m.Count()
if err == nil {
    fmt.Println(&quot;Total Nums: &quot;, nums)
}
</code></pre>

</body>

<!-- Mirrored from beego.vip/docs/mvc/model/query.md by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 27 Apr 2022 04:29:24 GMT -->

<!-- Mirrored from beego.w3engineers.com/beego.vip/docs/mvc/model/query.html by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 15 Oct 2022 03:29:51 GMT -->
</html>

                    </div>
                </div>
            </div>
            <script type="text/javascript">
                var disqus_url = 'http://beego.me/docs/' + 'mvc\/model\/query.md?lang=en-US';
            </script>
            <div id="disqus_thread"></div>
<script type="text/javascript">
     
    var disqus_shortname = 'beego'; 

     
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com/" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
        </div>
    </div>
</div>

		    </div>
		    <div class="wrapper-push"></div>
		</div>
		<footer id="footer">
    <div class="container">
        <div class="row footer-wrap">
            <div class="col-md-12 desc">
                <div class="pull-right">
                    <div class="btn-group dropup">
                        <button type="button" class="btn btn-default btn-md dropdown-toggle" data-toggle="dropdown">Language:English <i class="caret"></i></button>
                        <ul class="dropdown-menu">
                            
                                <li><a href="javascript::" data-lang="zh-CN" class="lang-changed">简体中文</a></li>
                            
                                <li><a href="javascript::" data-lang="ru-RU" class="lang-changed">Russian</a></li>
                            
                        </ul>
                    </div>
                    
                    
                        <a class="btn btn-success" href="../../../donate.html"><i class="icon-dollar"></i> Donate Us</a>
                    
                </div>
                
                <p>
                    <a href="../../../about.html"><strong>About</strong></a>
                    |
                    <a href="../../../team.html"><strong>Team</strong></a>
                    |
                    <a target="_blank" href="https://github.com/astaxie/beego" target="_blank"><strong><i class="icon-github-sign"></i> Github</strong></a>
                    - 1ms.
                </p>

                <p>
                    Copyright © 2012-2022 Beego Under the <a href="http://www.apache.org/licenses/LICENSE-2.0.html">apache 2.0 licence</a>. Logo designed by <a target="_blank" href="http://mdong.org/">Tengfei</a>.
                </p>

            </div>
        </div>
    </div>
</footer>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','../../../../www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-39123845-1', 'beego.html');
  ga('send', 'pageview');

</script>

<script>/* Beego Compress Powered */</script>
	<script type="text/javascript" src="../../../static/js/lib.mine67fe67f.js?ver=1650787190"></script>

<script>/* Beego Compress Powered */</script>
	<script type="text/javascript" src="../../../static/js/app.mine67fe67f.js?ver=1650787190"></script>


	</body>
</html>



