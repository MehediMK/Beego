<!DOCTYPE html>
<html>
	
<!-- Mirrored from beego.vip/docs/module/httplib.md by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 27 Apr 2022 04:29:25 GMT -->
<!-- Added by HTTrack -->
<!-- Mirrored from beego.w3engineers.com/beego.vip/docs/module/httplib.html by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 15 Oct 2022 03:29:54 GMT -->
<meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
		<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta name="author" content="slene, Unknown" />

<title>Httplib Module - beego: simple &amp; powerful Go app framework</title>

<link rel="shortcut icon" href="../../static/img/favicon.png" />


<script>/* Beego Compress Powered */</script>
	<link rel="stylesheet" href="../../static/css/lib.mine67fe67f.css?ver=1650787190" />

<!--[if IE 7]>
<script>/* Beego Compress Powered */</script>
	<link rel="stylesheet" href="/static/css/ie7.min.css?ver=1650787190" />

<![endif]-->
<script>/* Beego Compress Powered */</script>
	<link rel="stylesheet" href="../../static/css/app.mine67fe67f.css?ver=1650787190" />


<!--[if lt IE 9]>
	<script>/* Beego Compress Powered */</script>
	<script type="text/javascript" src="/static/js/ie9.min.js?ver=1650787190"></script>

<![endif]-->
		
	</head>
	<body id="front">
		<noscript>Please enable JavaScript in your browser!</noscript>
		<div id="wrapper">
			<nav class="navbar navbar-default navbar-fixed-top">
    <div class="container" data-toggle="clingify">
        <div class="row">
            <div class="navbar-header">
                
                <span class="visible-xs">
                    <a id="docs-collapse-btn" class="navbar-btn" data-toggle="jpanel-menu" data-target="#docs-collapse">
                        <span class="sr-only">Toggle docs menu</span>
                        <i class="icon icon-angle-right"></i>
                    </a>
                </span>
                
                <a type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </a>
                <a class="hidden-xs logo" href="../../index.html">
                    <img style="height:32px;width:102px;" src="../../static/img/beego_purple.png">
                </a>
                <div class="visible-xs text-center">
                    <a class="navbar-brand" href="../../index.html">
                        Beego
                    </a>
                    
                    <span class="nav-github">
                        <span rel="show-github" data-user="astaxie" data-repo="beego"></span>
                    </span>
                    
                </div>
            </div>
            <div class="collapse navbar-collapse" role="navigation" id="navbar-collapse">
                <ul class="nav navbar-nav">
                    <li ><a href="../../index.html">Home</a></li>
                    <li ><a href="../../quickstart.html">Getting started</a></li>
                    <li ><a href="../../community.html">Community</a></li>
                    <li class="active"><a href="../intro/index.html">Documentation</a></li>
                    <li ><a href="../../video.html">Video</a></li>
                    <li ><a href="../../products.html">Products</a></li>
                    <li ><a href="../../blog.html">Blog</a></li>
                </ul>
                <div class="hidden-sm hidden-xs nav-lang pull-right">
                    <div class="btn-group">
                        <button type="button" class="btn btn-xs btn-default btn-md dropdown-toggle" data-toggle="dropdown">Language:English <i class="caret"></i></button>
                        <ul class="dropdown-menu">
                            
                                <li><a href="javascript::" data-lang="zh-CN" class="lang-changed">简体中文</a></li>
                            
                                <li><a href="javascript::" data-lang="ru-RU" class="lang-changed">Russian</a></li>
                            
                        </ul>
                    </div>
                </div>
                <div class="hidden-sm hidden-xs nav-github pull-right">
                    <span rel="show-github" data-user="beego" data-repo="beego"></span>
                    <span rel="show-github" data-user="beego" data-repo="beego" data-type="fork"></span>
                </div>
            </div>
        </div>
    </div>
</nav>

			<div id="main">
				
<div class="container main-container">
    <div class="row">
        <div class="col-md-2 col-sm-3">
            <div id="docs-collapse" class="collapse navbar-collapse docs-sidenav">
                
                    
                    
    
        
            <ul class="list-unstyled">
                
                    
                        <li class="group">
                            <div class="section">
                            
                                <a class=" item" href="../intro/index.html">Beego introduction</a>
                            
                            </div>
                            
    
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../intro/contributing.html">Contributing</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../intro/releases.html">Release Notes</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../intro/upgrade.html">Upgrade Beego</a></li>
                    
                
            </ul>
        
    

                        </li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li class="group">
                            <div class="section">
                            
                                <a class=" item" href="../install/index.html">Install / Upgrade</a>
                            
                            </div>
                            
    
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../install/bee.html">bee tool usage</a></li>
                    
                
            </ul>
        
    

                        </li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li class="group">
                            <div class="section">
                            
                                <a class=" item" href="../quickstart/index.html">Quickstart</a>
                            
                            </div>
                            
    
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../quickstart/new.html">Create a new project</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../quickstart/router.html">Routing settings</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../quickstart/controller.html">Controller</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../quickstart/model.html">Models</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../quickstart/view.html">View</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../quickstart/static.html">Static files</a></li>
                    
                
            </ul>
        
    

                        </li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li class="group">
                            <div class="section">
                            
                                <a class=" item" href="../mvc/index.html">MVC Introduction</a>
                            
                            </div>
                            
    
        
            <ul class="list-unstyled">
                
                    
                        <li class="group">
                            <div class="section">
                            
                                Controllers
                            
                            </div>
                            
    
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../mvc/controller/config.html">Configuration</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../mvc/controller/router.html">Routing</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../mvc/controller/controller.html">Controller funcs</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../mvc/controller/params.html">Request parameters</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../mvc/controller/xsrf.html">XSRF filtering</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../mvc/controller/filter.html">Filters</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../mvc/controller/session.html">Session control</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../mvc/controller/flash.html">Flash messages</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../mvc/controller/urlbuilding.html">URL Building</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../mvc/controller/jsonxml.html">Response formats</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../mvc/controller/validation.html">Form validation</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../mvc/controller/errors.html">Error Handling</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../mvc/controller/logs.html">Logging</a></li>
                    
                
            </ul>
        
    

                        </li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li class="group">
                            <div class="section">
                            
                                Models
                            
                            </div>
                            
    
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../mvc/model/overview.html">Overview</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../mvc/model/orm.html">ORM Usage</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../mvc/model/object.html">CRUD Operations</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../mvc/model/query.html">Advanced Queries</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../mvc/model/rawsql.html">Raw SQL to query</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../mvc/model/querybuilder.html">Query Builder</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../mvc/model/transaction.html">Transaction</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../mvc/model/models.html">Model Definition</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../mvc/model/cmd.html">Command Line</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../mvc/model/test.html">Test Cases</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../mvc/model/custom_fields.html">Custom Fields</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../mvc/model/faq.html">FAQ</a></li>
                    
                
            </ul>
        
    

                        </li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li class="group">
                            <div class="section">
                            
                                Views
                            
                            </div>
                            
    
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../mvc/view/view.html">Template Parsing</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../mvc/view/template.html">Template Functions</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../mvc/view/static.html">Static files</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../mvc/view/page.html">Pagination</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../mvc/view/global_variables.html">Global Variables</a></li>
                    
                
            </ul>
        
    

                        </li>
                    
                
            </ul>
        
    

                        </li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li class="group">
                            <div class="section">
                            
                                <a class=" item" href="index.html">Modules</a>
                            
                            </div>
                            
    
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="session.html">Session Module</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="cache.html">Cache Module</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="logs.html">Logs Module</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class="active item" href="httplib.html">Httplib Module</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="context.html">Context Module</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="toolbox.html">toolbox</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="task.html">Task Module</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="admin.html">Admin module</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="config.html">Config Module</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="governor.html">Governor module</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="i18n.html">i18n Module</a></li>
                    
                
            </ul>
        
    

                        </li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li class="group">
                            <div class="section">
                            
                                <a class=" item" href="../advantage/index.html">Advanced Beego</a>
                            
                            </div>
                            
    
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../advantage/monitor.html">Live Monitor</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../advantage/docs.html">Automated API Documentation</a></li>
                    
                
            </ul>
        
    

                        </li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li class="group">
                            <div class="section">
                            
                                <a class=" item" href="../contributed/index.html">Middleware contribution</a>
                            
                            </div>
                            
    
        
    

                        </li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li class="group">
                            <div class="section">
                            
                                <a class=" item" href="../deploy/index.html">Deployment</a>
                            
                            </div>
                            
    
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../deploy/beego.html">Stand alone Deployment</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../deploy/supervisor.html">Deployment with Supervisord</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../deploy/systemctl.html">Deployment with Systemctl</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../deploy/nginx.html">Deployment with nginx</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../deploy/apache.html">Deployment with Apache</a></li>
                    
                
            </ul>
        
    

                        </li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li class="group">
                            <div class="section">
                            
                                <a class=" item" href="../examples/index.html">Demos</a>
                            
                            </div>
                            
    
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../examples/chat.html">Chat Room</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../examples/shorturl.html">URL Shortener</a></li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li><a class=" item" href="../examples/todo.html">To-do List</a></li>
                    
                
            </ul>
        
    

                        </li>
                    
                
            </ul>
        
            <ul class="list-unstyled">
                
                    
                        <li class="group">
                            <div class="section">
                            
                                <a class=" item" href="../faq/index.html">FAQ</a>
                            
                            </div>
                            
    
        
    

                        </li>
                    
                
            </ul>
        
    

                
            </div>
        </div>
        <div class="col-md-10 col-sm-9">
            <div class="box">
				<div>
					<script>
					  (function() {
					    var cx = '014389342508982455625:2tomkdt5uo4';
					    var gcse = document.createElement('script');
					    gcse.type = 'text/javascript';
					    gcse.async = true;
					    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
					        '//www.google.com/cse/cse.js?cx=' + cx;
					    var s = document.getElementsByTagName('script')[0];
					    s.parentNode.insertBefore(gcse, s);
					  })();
					</script>
					<gcse:search></gcse:search>
				</div>
                <div class="cell slim page-box">
                    <p>
                        <a href="https://github.com/beego/beedoc/blob/master/en-US/module/httplib.md" class="pull-right btn btn-info" target="_blank">Improve this page on GitHub</a>
                        <span class="clearfix"></span>
                    </p>
                    <div class="markdown docs-markdown">
                        <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title></title>
  <meta name="GENERATOR" content="Blackfriday Markdown Processor v1.1" />
  <meta charset="utf-8" />
</head>
<body>

<h1>Client Request</h1>

<p>Similar to Curl, httplib is used to simulate http requests sent by clients. Similar to jQuery, it supports method chaining. It&rsquo;s easy to use and it can be installed by:</p>

<pre><code>go get github.com/beego/beego/v2/client/httplib
</code></pre>

<h2>Basic Usage</h2>

<p>Import package:</p>

<pre><code>import (
    &quot;github.com/beego/beego/v2/client/httplib&quot;
)   
</code></pre>

<p>Initialize request method and url:</p>

<pre><code>req := httplib.Get(&quot;http://beego.vip/&quot;)
</code></pre>

<p>Send the request and retrieve the data in the response:</p>

<pre><code>str, err := req.String()
if err != nil {
    t.Fatal(err)
}
fmt.Println(str)
</code></pre>

<h2>Method Functions</h2>

<p>httplib supports these methods:</p>

<ul>
<li><code>Get(url string)</code><br /></li>
<li><code>Post(url string)</code><br /></li>
<li><code>Put(url string)</code><br /></li>
<li><code>Delete(url string)</code><br /></li>
<li><code>Head(url string)</code><br /></li>
</ul>

<h2>Debug Output</h2>

<p>Enable debug information output:</p>

<pre><code>req.Debug(true)
</code></pre>

<p>Then it will output debug information:</p>

<pre><code>httplib.Get(&quot;http://beego.vip/&quot;).Debug(true).Response()

// Output
GET / HTTP/0.0
Host: beego.vip
User-Agent: beegoServer
</code></pre>

<h2>HTTPS Request</h2>

<p>If the requested scheme is https, we need to set the TLS of client:</p>

<pre><code>req.SetTLSClientConfig(&amp;tls.Config{InsecureSkipVerify: true})
</code></pre>

<p><a href="http://gowalker.org/crypto/tls#Config">Learn more about TLS settings</a></p>

<h2>Set Timeout</h2>

<p>Can set request timeout and data reading timeout by:</p>

<pre><code>req.SetTimeout(connectTimeout, readWriteTimeout)
</code></pre>

<p>It is a function of request object. So it can be done like this:</p>

<pre><code>httplib.Get(&quot;http://beego.vip/&quot;).SetTimeout(100 * time.Second, 30 * time.Second).Response()
</code></pre>

<h2>Set Request Params</h2>

<p>For Put or Post requests, we may need to send parameters. Parameters can be set in the following manner:</p>

<pre><code>req := httplib.Post(&quot;http://beego.vip/&quot;)
req.Param(&quot;username&quot;,&quot;astaxie&quot;)
req.Param(&quot;password&quot;,&quot;123456&quot;)
</code></pre>

<h2>Send big data</h2>

<p>To simulate file uploading or to send big data, one can use the <code>Body</code> function:</p>

<pre><code>req := httplib.Post(&quot;http://beego.vip/&quot;)
bt,err:=ioutil.ReadFile(&quot;hello.txt&quot;)
if err!=nil{
    log.Fatal(&quot;read file err:&quot;,err)
}
req.Body(bt)
</code></pre>

<h2>Set header</h2>

<p>To simulate header values, e.g.:</p>

<pre><code>Accept-Encoding:gzip,deflate,sdch
Host:beego.vip
User-Agent:Mozilla/5.0 (Macintosh; Intel Mac OS X 10_9_0) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/31.0.1650.57 Safari/537.36
</code></pre>

<p>Can use <code>Header</code> function:</p>

<pre><code>req := httplib.Post(&quot;http://beego.vip/&quot;)
req.Header(&quot;Accept-Encoding&quot;,&quot;gzip,deflate,sdch&quot;)
req.Header(&quot;Host&quot;,&quot;beego.vip&quot;)
req.Header(&quot;User-Agent&quot;,&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_9_0) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/31.0.1650.57 Safari/537.36&quot;)
</code></pre>

<h2>Upload file</h2>

<p>PostFile function requires the first parameter to be the name of form and the second parameter is the filename or filepath you want to send.</p>

<pre><code>b:=httplib.Post(&quot;http://beego.vip/&quot;)
b.Param(&quot;username&quot;,&quot;astaxie&quot;)
b.Param(&quot;password&quot;,&quot;123456&quot;)
b.PostFile(&quot;uploadfile1&quot;, &quot;httplib.pdf&quot;)
b.PostFile(&quot;uploadfile2&quot;, &quot;httplib.txt&quot;)
str, err := b.String()
if err != nil {
    t.Fatal(err)
}
</code></pre>

<h2>Get Response</h2>

<p>The settings above are before sending request, how can we get response after request? Here are the ways:</p>

<table>
<thead>
<tr>
<td>Method</td>
<td>Type</td>
<td>Description</td>
</tr>
</thead>

<tbody>
<tr>
<td><code>req.Response()</code></td>
<td><code>(*http.Response, error)</code></td>
<td>This is a <code>http.Response</code> object. You can get data from it.</td>
</tr>

<tr>
<td><code>req.Bytes()</code></td>
<td><code>([]byte, error)</code></td>
<td>Return raw response body.</td>
</tr>

<tr>
<td><code>req.String()</code></td>
<td><code>(string, error)</code></td>
<td>Return raw response body.</td>
</tr>

<tr>
<td><code>req.ToFile(filename string)</code></td>
<td><code>error</code></td>
<td>Save response body into a file.</td>
</tr>

<tr>
<td><code>req.ToJSON(result interface{})</code></td>
<td><code>error</code></td>
<td>Parse JSON response into the result object.</td>
</tr>

<tr>
<td><code>req.ToXml(result interface{})</code></td>
<td><code>error</code></td>
<td>Parse XML response into the result object.</td>
</tr>
</tbody>
</table>

<h1>Filter</h1>

<p>In order to support some AOP feature, e.g. logs, tracing, we designed <code>filter-chain</code> for httplib.</p>

<p>There are two key interfaces:</p>

<pre lang="go"><code>type FilterChain func(next Filter) Filter

type Filter func(ctx context.Context, req *BeegoHTTPRequest) (*http.Response, error)
</code></pre>

<p>This is a typical usage of <code>Filter-Chain</code> pattern. So you must invoke <code>next(...)</code> when you want to implement your own logic.</p>

<p>Here is an example：<br />
```go<br />
func myFilter(next httplib.Filter) httplib.Filter {</p>

<pre><code>return func(ctx context.Context, req *httplib.BeegoHTTPRequest) (*http.Response, error) {
    r := req.GetRequest()
    logs.Info(&quot;hello, here is the filter: &quot;, r.URL)
    // Never forget invoke this. Or the request will not be sent
    return next(ctx, req)
}
</code></pre>

<p>}<br />
```</p>

<p>And we could register this filter as global filter:<br />
```go</p>

<pre><code>httplib.SetDefaultSetting(httplib.BeegoHTTPSettings{

    FilterChains: []httplib.FilterChain{
        myFilter,
    },

    UserAgent:        &quot;beegoServer&quot;,
    ConnectTimeout:   60 * time.Second,
    ReadWriteTimeout: 60 * time.Second,
    Gzip:             true,
    DumpBody:         true,
})
</code></pre>

<pre><code>
Sometimes you only want to use the filter for specific requests:

```go
req.AddFilters(myFilter)
</code></pre>

<p>We provide some filters.</p>

<h2>Prometheus Filter</h2>

<p>It&rsquo;s used to support <code>Prometheus</code> framework to collect metric data.</p>

<pre lang="go"><code>    builder := prometheus.FilterChainBuilder{
        AppName: &quot;My-test&quot;,
        ServerName: &quot;User-server-1&quot;,
        RunMode: &quot;dev&quot;,
    }
    req := httplib.Get(&quot;http://beego.vip/&quot;)
    // only work for this request, or using SetDefaultSetting to support all requests
    req.AddFilters(builder.FilterChain)

    resp, err := req.Response()
    if err != nil {
        logs.Error(&quot;could not get response: &quot;, err)
    } else {
        logs.Info(resp)
    }
</code></pre>

<p>If you don&rsquo;t use Beego&rsquo;s admin service, you must expose <code>prometheus</code> port manually.</p>

<h2>Opentracing Filter</h2>

<pre lang="go"><code>    builder := opentracing.FilterChainBuilder{}
    req := httplib.Get(&quot;http://beego.vip/&quot;)
    // only work for this request, or using SetDefaultSetting to support all requests
    req.AddFilters(builder.FilterChain)

    resp, err := req.Response()
    if err != nil {
        logs.Error(&quot;could not get response: &quot;, err)
    } else {
        logs.Info(resp)
    }
</code></pre>

<p>Don&rsquo;t forget to register <code>Opentracing</code> real implementation.</p>

</body>

<!-- Mirrored from beego.vip/docs/module/httplib.md by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 27 Apr 2022 04:29:25 GMT -->

<!-- Mirrored from beego.w3engineers.com/beego.vip/docs/module/httplib.html by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 15 Oct 2022 03:29:54 GMT -->
</html>

                    </div>
                </div>
            </div>
            <script type="text/javascript">
                var disqus_url = 'http://beego.me/docs/' + 'module\/httplib.md?lang=en-US';
            </script>
            <div id="disqus_thread"></div>
<script type="text/javascript">
     
    var disqus_shortname = 'beego'; 

     
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com/" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
        </div>
    </div>
</div>

		    </div>
		    <div class="wrapper-push"></div>
		</div>
		<footer id="footer">
    <div class="container">
        <div class="row footer-wrap">
            <div class="col-md-12 desc">
                <div class="pull-right">
                    <div class="btn-group dropup">
                        <button type="button" class="btn btn-default btn-md dropdown-toggle" data-toggle="dropdown">Language:English <i class="caret"></i></button>
                        <ul class="dropdown-menu">
                            
                                <li><a href="javascript::" data-lang="zh-CN" class="lang-changed">简体中文</a></li>
                            
                                <li><a href="javascript::" data-lang="ru-RU" class="lang-changed">Russian</a></li>
                            
                        </ul>
                    </div>
                    
                    
                        <a class="btn btn-success" href="../../donate.html"><i class="icon-dollar"></i> Donate Us</a>
                    
                </div>
                
                <p>
                    <a href="../../about.html"><strong>About</strong></a>
                    |
                    <a href="../../team.html"><strong>Team</strong></a>
                    |
                    <a target="_blank" href="https://github.com/astaxie/beego" target="_blank"><strong><i class="icon-github-sign"></i> Github</strong></a>
                    - 1ms.
                </p>

                <p>
                    Copyright © 2012-2022 Beego Under the <a href="http://www.apache.org/licenses/LICENSE-2.0.html">apache 2.0 licence</a>. Logo designed by <a target="_blank" href="http://mdong.org/">Tengfei</a>.
                </p>

            </div>
        </div>
    </div>
</footer>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','../../../www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-39123845-1', 'beego.html');
  ga('send', 'pageview');

</script>

<script>/* Beego Compress Powered */</script>
	<script type="text/javascript" src="../../static/js/lib.mine67fe67f.js?ver=1650787190"></script>

<script>/* Beego Compress Powered */</script>
	<script type="text/javascript" src="../../static/js/app.mine67fe67f.js?ver=1650787190"></script>


	</body>
</html>



